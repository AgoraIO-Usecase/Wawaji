### 接入指南 v1.2 (已废弃)

1. **获取节点服务器域名**
    ```javascript
    $.ajax({
        url: "https://h5cs-1.agoraio.cn:7668/geth5gw/jsonp",
        type: "POST",
        headers: {
            "Content-type": "application/json; charset=utf-8"
        },
        data: JSON.stringify({
            key: "<your app id>",
            cname: "<your channel name>"
        })
    });
    ```

返回结果为可用服务器域名列表数组，或者error，如果当前服务已过载
一般最适合你当前网段和负载的为第一个域名


2. **使用获得的节点地址发送machine请求**

基本与v1.1相同，需要使用步骤1获得的域名开启视频服务，或获得视频服务信息若已开启
    ```javascript
    $.ajax({
        url: "https://" + "<domain from step 1>" + "/v1/machine",
        type: "POST",
        data: {
            appid: machine.appid,
            channel: machine.channel,
            key: key,
            //可选，若你没有开启动态key则不需要传，开启的话需要传你自己后台计算的动态key
            uid1: "<主摄像头uid>",
            //可选，若不传则默认为1，请确认这个uid与你推流的uid一致，不然无法看到视频流
            uid2: "<副摄像头uid>"
            //可选，若不传则默认为2，请确认这个uid与你推流的uid一致，不然无法看到视频流
        }
    })
    ```

3. **根据获取的信息播放视频**

在返回的视频流信息中会有属于你的appid与频道对应的主副摄像头地址，该地址可直接使用第三方播放器如jsmpeg播放，视频服务信息的数据结构可参阅api文档

https://github.com/AgoraIO/Wawaji/blob/rtc-only/Wawaji-Client-Web-H5/docs/api.html

